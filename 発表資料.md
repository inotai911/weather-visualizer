# 気象情報可視化システム 発表資料

## 📊 プロジェクト概要

### タイトル
**気象情報可視化システム - Weather Visualization System**

### 目的
世界中の気象データをリアルタイムで取得・可視化し、ユーザーが簡単に天気情報を分析できるWebアプリケーション

---

## 🎯 主な機能

### 1. 世界中の気象データ取得
- Open Meteo APIを利用した無料の気象データ取得
- 都市名を入力するだけで世界中の気象情報にアクセス
- 7日間の時間ごとの詳細な予報データ

### 2. インタラクティブな地図表示
- Leaflet.jsによる対話型地図
- 選択した地域へのスムーズなアニメーション移動
- マーカーでの位置表示

### 3. リアルタイムデータ可視化
- **Chart.js**による美しいグラフ表示
  - 気温の推移
  - 湿度の変化
  - 降水量の予測
  - 風速の変動
  - 気圧の推移

### 4. 統計サマリー
- 平均気温、最高気温、最低気温
- 平均湿度
- 総降水量
- 平均風速

### 5. データテーブル表示
- 全データの一覧表示
- 天気アイコンによる視覚的な情報表示
- スクロール可能な大量データの閲覧

### 6. 操作ログ記録
- 全ユーザー操作の自動記録
- トレーサビリティの確保

---

## 🏗️ システムアーキテクチャ

### 技術スタック

#### バックエンド
- **Flask 3.0.0** - Pythonの軽量Webフレームワーク
- **SQLite** - 組み込みデータベース
- **Requests** - HTTP通信ライブラリ

#### フロントエンド
- **HTML5 + CSS3 + JavaScript (ES6+)**
- **Chart.js** - データ可視化ライブラリ
- **Leaflet.js** - 対話型地図ライブラリ
- **Google Fonts (Noto Sans JP)** - 日本語フォント

#### API
- **Open Meteo API** - 無料気象データAPI
- **Nominatim Geocoding API** - 地名→座標変換

### システム構成図

```
┌─────────────────┐
│   ブラウザ      │
│  (Frontend)     │
└────────┬────────┘
         │ HTTP/REST API
         ↓
┌─────────────────┐     ┌──────────────┐
│  Flask Server   │────→│ Open Meteo   │
│  (Backend)      │←────│ API          │
└────────┬────────┘     └──────────────┘
         │
         ↓
┌─────────────────┐
│  SQLite DB      │
│  (Data Storage) │
└─────────────────┘
```

---

## 💻 データベース設計

### テーブル構成

#### 1. meteo_data（気象データ）
```sql
CREATE TABLE meteo_data (
    id INTEGER PRIMARY KEY,
    location_name TEXT NOT NULL,
    latitude REAL,
    longitude REAL,
    timestamp DATETIME,
    temperature REAL,        -- 気温(℃)
    humidity REAL,           -- 湿度(%)
    precipitation REAL,      -- 降水量(mm)
    wind_speed REAL,         -- 風速(m/s)
    wind_direction INTEGER,  -- 風向(度)
    weather_code INTEGER,    -- 天気コード
    pressure REAL            -- 気圧(hPa)
);
```

#### 2. user_log（操作ログ）
```sql
CREATE TABLE user_log (
    id INTEGER PRIMARY KEY,
    action_type TEXT,        -- API_FETCH, DATA_VIEW等
    action_detail TEXT,
    timestamp DATETIME
);
```

#### 3. locations（地域マスタ）
```sql
CREATE TABLE locations (
    id INTEGER PRIMARY KEY,
    name TEXT UNIQUE,
    latitude REAL,
    longitude REAL
);
```

---

## 🎨 UI/UXデザイン

### デザインコンセプト
**モダン・クリーン・シンプル**

### デザイン原則
1. **余白の削減** - コンテンツを最大限活用
2. **視覚的階層** - 重要な情報を強調
3. **一貫性** - Google Material Designの原則に準拠
4. **レスポンシブ** - デバイスサイズに応じた最適表示

### カラーパレット
- **プライマリ**: `#1a73e8` (Google Blue)
- **背景**: `#f5f7fa` (ライトグレー)
- **カード**: `#ffffff` (ホワイト)
- **テキスト**: `#202124` (ダークグレー)
- **セカンダリテキスト**: `#5f6368` (ミディアムグレー)

### レイアウト特徴
- **スティッキーヘッダー** - スクロールしても常に表示
- **カードベースデザイン** - 情報をグループ化
- **タブナビゲーション** - コンテンツの切り替えを容易に
- **グリッドレイアウト** - 統計情報を見やすく配置

---

## 🔌 API エンドポイント仕様

### 地域管理
- `GET /api/locations` - 登録済み地域一覧取得
- `POST /api/locations` - 新規地域追加

### 気象データ
- `POST /api/weather/fetch` - APIからデータ取得
  - パラメータ: `location_name`, `days`
- `GET /api/weather` - フィルタリングしたデータ取得
  - パラメータ: `location`, `start_date`, `end_date`, `limit`
- `GET /api/weather/summary` - 統計サマリー取得

### ログ
- `GET /api/logs` - 操作ログ取得

---

## 🚀 実装のハイライト

### 1. ジオコーディング機能
```python
def geocode_location(location_name):
    """地名から座標を取得"""
    url = "https://geocoding-api.open-meteo.com/v1/search"
    # Nominatim APIで世界中の都市に対応
```

### 2. データキャッシング
- SQLiteにデータを保存することで再取得の負荷を軽減
- UNIQUE制約で重複データを防止

### 3. アニメーション付き地図
```javascript
map.flyTo([lat, lon], 10, { duration: 1.5 });
```

### 4. レスポンシブグラフ
```javascript
responsive: true,
maintainAspectRatio: false
```

---

## 📈 使用例とデモ

### シナリオ1: 東京の気象データ確認
1. 地域名に「Tokyo」と入力
2. 日付範囲を選択（過去7日間）
3. 「データ取得」ボタンをクリック
4. グラフで気温推移を確認
5. 地図上に東京の位置を表示

### シナリオ2: 複数地域の比較
1. 東京のデータを取得
2. データ表タブで詳細確認
3. ニューヨークのデータを取得
4. 操作ログで履歴を確認

---

## 🌟 今後の拡張可能性

### 短期的な改善
1. **お気に入り機能** - よく見る地域を保存
2. **通知機能** - 特定条件で通知（例: 気温が30℃を超える）
3. **エクスポート機能** - データをCSV/JSONで出力
4. **ダークモード** - 夜間の使いやすさ向上

### 中期的な拡張
1. **複数地域比較グラフ** - 2つ以上の地域を同時表示
2. **予報精度の表示** - データの信頼性を可視化
3. **ヒートマップ** - 広域の気温分布を表示
4. **モバイルアプリ化** - Flutter for Mobileで展開

### 長期的な展開
1. **機械学習予測** - 独自の予測モデル構築
2. **ユーザーコミュニティ** - 観測データの共有
3. **企業向けAPI** - 商用利用可能なAPI提供
4. **多言語対応** - グローバル展開

---

## 🎓 学んだこと・技術的課題

### 技術的な学び
1. **RESTful API設計** - 適切なエンドポイント設計
2. **非同期処理** - JavaScriptの`async/await`活用
3. **データベース最適化** - インデックスとUNIQUE制約
4. **フロントエンド最適化** - バンドルサイズの削減

### 直面した課題と解決策
1. **CORS問題** → Flask-CORSで解決
2. **地図の表示遅延** → Leafletの遅延読み込み
3. **大量データの表示** → ページネーション（未実装）
4. **API制限** → データキャッシング戦略

---

## 🔒 セキュリティとパフォーマンス

### セキュリティ対策
- SQLインジェクション対策（パラメータ化クエリ）
- CORS設定による制限
- 入力値のバリデーション

### パフォーマンス最適化
- データベースインデックス
- 静的ファイルのキャッシング
- グラフの遅延レンダリング
- API呼び出しの制限（レートリミット考慮）

---

## 📊 プロジェクト統計

- **開発期間**: 約2週間
- **コード行数**: 
  - Python: 約430行
  - HTML/CSS/JS: 約650行
- **使用API**: 2種類（Open Meteo, Nominatim）
- **データベーステーブル**: 3つ
- **APIエンドポイント**: 8個
- **対応地域**: 世界中（Nominatimでカバーされる全地域）

---

## 🛠️ セットアップと実行

### 必要な環境
- Python 3.8以上
- pip
- Git

### クイックスタート
```bash
# リポジトリクローン
git clone https://github.com/inotai911/weather-visualizer.git
cd weather-visualizer

# バックエンドセットアップ
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt

# サーバー起動
python app.py

# ブラウザでアクセス
# http://localhost:5000
```

### ネットワークアクセス（LAN内の他のデバイス）
```bash
# サーバーのIPアドレスを確認
# 例: http://172.28.136.38:5000
```

---

## 🤝 チーム開発ガイド

### ブランチ戦略
- `main` - 本番用の安定版
- `test` - 開発・テスト用
- `feature/*` - 新機能開発用

### 開発フロー
1. `test`ブランチで開発
2. 動作確認
3. `main`にマージ
4. GitHubにプッシュ

### コーディング規約
- Python: PEP 8準拠
- JavaScript: ES6+標準
- コメント: 日本語OK
- 関数: Docstring必須

---

## 📚 参考資料とリソース

### 使用API
- [Open Meteo API Documentation](https://open-meteo.com/en/docs)
- [Nominatim API](https://nominatim.org/release-docs/latest/api/Overview/)

### ライブラリ・フレームワーク
- [Flask Documentation](https://flask.palletsprojects.com/)
- [Chart.js Documentation](https://www.chartjs.org/docs/)
- [Leaflet Documentation](https://leafletjs.com/)

### デザインインスピレーション
- Google Material Design
- Apple Human Interface Guidelines

---

## 👥 開発者情報

### GitHubリポジトリ
https://github.com/inotai911/weather-visualizer

### ライセンス
MIT License

### コントリビューター
- 開発者: inotai911

---

## 🎬 まとめ

### プロジェクトの成果
✅ 世界中の気象データを簡単に取得・可視化  
✅ モダンでクリーンなUI/UX  
✅ 拡張性の高いアーキテクチャ  
✅ オープンソースで公開

### ビジョン
**誰でも簡単に気象データにアクセスできる世界を目指して**

---

## 📞 お問い合わせ

ご質問・ご提案がございましたら、GitHubのIssuesまでお願いいたします。

**ありがとうございました！** 🙏
